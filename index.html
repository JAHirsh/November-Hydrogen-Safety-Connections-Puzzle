<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hydrogen Safety Connections Puzzle</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    margin: 0;
    padding: 20px;
    text-align: center;
}

h1 {
    color: #005e82;
    margin-bottom: 10px;
}

p.subtitle {
    margin-top: 0;
    font-size: 14px;
    color: #444;
}

.grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    max-width: 650px;
    margin: 20px auto;
}

.tile {
    background: #ffffff;
    border: 2px solid #dddddd;
    padding: 14px;
    border-radius: 6px;
    cursor: pointer;
    user-select: none;
    font-size: 14px;
    min-height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
}

.selected {
    background: #bfe2f0;
    border-color: #005e82;
}

.group-found {
    background: #68bd49 !important;
    color: white;
    font-weight: bold;
    cursor: default;
}

button {
    margin-top: 20px;
    padding: 10px 18px;
    background: #005e82;
    border-radius: 4px;
    color: white;
    border: none;
    cursor: pointer;
    font-size: 14px;
}

button:disabled {
    background: #ccc;
    cursor: default;
}

#message {
    margin-top: 16px;
    font-size: 14px;
    color: #333;
    min-height: 20px;
    padding: 0 10px;
}

.footer-note {
    margin-top: 24px;
    font-size: 12px;
    color: #666;
}
</style>
</head>

<body>

<h1>Hydrogen Safety Connections</h1>
<p class="subtitle">
  Select 4 related terms to form a category. Inspired by the NYT <em>Connections</em> game.
</p>

<div class="grid" id="grid"></div>

<button id="submitBtn" disabled>Submit Selection</button>

<h3 id="message"></h3>

<p class="footer-note">
  Try using this as a quick icebreaker in your next hydrogen safety meeting.
</p>

<script>
// Base list of terms
const terms = [
    "Vent Stack", "Flame Arrestor", "Pressure Relief Valve", "Deflagration",
    "Electrolyzer", "Tube Trailer", "Mobile Refueler", "LH₂ Storage Tank",
    "Near-Miss", "Incident Report", "Root Cause Analysis", "Corrective Action",
    "Leak Detection Sensor", "Odorant (None for H₂)", 
    "Gas Dispersion Modeling", "Lower Flammability Limit"
];

// Category definitions (unchanged)
const groups = [
    {
        items: ["Vent Stack", "Flame Arrestor", "Pressure Relief Valve", "Deflagration"],
        name: "Explosion / Fire Protection Equipment"
    },
    {
        items: ["Electrolyzer", "Tube Trailer", "Mobile Refueler", "LH₂ Storage Tank"],
        name: "Hydrogen Infrastructure"
    },
    {
        items: ["Near-Miss", "Incident Report", "Root Cause Analysis", "Corrective Action"],
        name: "Incident Investigation & Learning"
    },
    {
        items: ["Leak Detection Sensor", "Odorant (None for H₂)", 
                "Gas Dispersion Modeling", "Lower Flammability Limit"],
        name: "Gas Behavior, Detection & Modeling"
    }
];

let selected = [];
const grid = document.getElementById("grid");
const submitBtn = document.getElementById("submitBtn");
const message = document.getElementById("message");

// Fisher–Yates Shuffle (random each load)
function shuffle(array) {
    const arr = array.slice();
    for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
}

// CREATE TILES FROM SHUFFLED TERMS
const shuffledTerms = shuffle(terms);

shuffledTerms.forEach(term => {
    const div = document.createElement("div");
    div.classList.add("tile");
    div.innerText = term;

    div.onclick = () => toggleSelect(div, term);

    grid.appendChild(di
